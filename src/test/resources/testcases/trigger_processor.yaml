scenario: "Trigger Processor"

variables:
  modelName: "nobel-prize"
  modelVersion: 1
  workflowFile: workflow_with_processor.json
  initialEntity:
    year: "2027"
    category: "Bulk Test 1"
    comment: "First prize in the bulk set"

steps:
  - name: ImportWorkflow
    command: tool.importWorkflow
    arguments:
      modelName: ${variables.modelName}
      modelVersion: ${variables.modelVersion}
      workflowFile: ${variables.workflowFile}

  - name: UploadEntity
    command: service.addItem
    arguments:
      modelName: ${variables.modelName}
      modelVersion: ${variables.modelVersion}
      entity: ${variables.initialEntity}

  - name: ApplyTransition
    command: service.applyTransition
    arguments:
      entityId: ${UploadEntity.id}
      transitionName: TRIGGER_PROCESSOR

  - name: AssertProcessorTriggered
    command: assert.processorTriggered