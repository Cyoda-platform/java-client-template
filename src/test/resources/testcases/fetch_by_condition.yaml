scenario: "Fetch Prizes by Condition"

variables:
  modelName: "nobel-prize"
  modelVersion: 1
  initialEntities:
    - year: "2027"
      category: "Bulk Test 1"
      comment: "prize in the bulk set"
    - year: "2028"
      category: "Fetching"
      comment: "prize in the bulk set"
    - year: "2028"
      category: "Fetching"
      comment: "prize in the bulk set"
    - year: "2030"
      category: "Fetching"
      comment: "prize in the bulk set"
    - year: "2031"
      category: "Fetching"
      comment: "prize in the bulk set"

steps:
  - name: UploadAllEntities
    command: service.addItems
    arguments:
      modelName: ${variables.modelName}
      modelVersion: ${variables.modelVersion}
      entities: ${variables.initialEntities}

  - name: FetchByCondition
    command: service.search
    arguments:
      modelName: ${variables.modelName}
      modelVersion: ${variables.modelVersion}
      inMemory: true
      condition:
        type: group
        operator: AND
        conditions:
          - type: simple
            field: year
            operation: EQUALS
            value: "2028"
            jsonPath: "$.year"

  - name: AssertFetchedCount
    command: assert.size
    arguments:
      expected: 2
      actual: ${FetchByCondition}